import { LightningElement, api } from 'lwc';

const heartLogoSvg = `data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzJweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoNy4wNTg4MjQlLDIzLjkyMTU2OSUsMzkuMjE1Njg2JSk7ZmlsbC1vcGFjaXR5OjE7IiBkPSJNIDMxLjI4MTI1IDUuNDg4MjgxIEwgMzEuMjY1NjI1IDUuNDYwOTM4IEMgMzAuNzE4NzUgNC4yMTA5MzggMjkuOTA2MjUgMy4wODU5MzggMjguODM1OTM4IDIuMTQ0NTMxIEMgMjguODMyMDMxIDIuMTQwNjI1IDI4Ljc4MTI1IDIuMTAxNTYyIDI4Ljc4MTI1IDIuMTAxNTYyIEMgMjYuOTQ1MzEyIDAuNTExNzE5IDI0LjcwMzEyNSAtMC4xNDg0MzggMjIuMTEzMjgxIDAuMTQ4NDM4IEMgMTguNzY1NjI1IDAuNTM1MTU2IDE2LjgzMjAzMSAzLjE5OTIxOSAxNi40OTIxODggMy43NSBDIDE2LjQ2NDg0NCAzLjc4OTA2MiAxNi40Mzc1IDMuODM1OTM4IDE2LjQwNjI1IDMuODgyODEyIEMgMTUuMjg1MTU2IDIuODkwNjI1IDEyLjg4NjcxOSAxLjIzODI4MS
AxMi44ODY3MTkgMS4yMzgyODEgQyAxMi4xMzY3MTkgMC43NTc4MTIgOS4yMTQ4NDQgLTAuNjM2NzE5IDYuMDQyOTY5IDAuNDE3OTY5IEMgMy41NDY4NzUgMS4yNDYwOTQgMS43ODUxNTYgMi44MDg1OTQgMC44MDQ2ODggNS4wNTg1OTQgQyAtMC40ODgyODEgOC4wMzEyNSAtMC4yMTQ4NDQgMTEuMjQyMTg4IDEuNTY2NDA2IDE0LjE4MzU5NCBDIDEuNTY2NDA2IDE0LjE4MzU5NCAxLjU5NzY1NiAxNC4yMzgyODEgMS41OTc2NTYgMTQuMjM4MjgxIEMgMy40Mzc1IDE3LjQ1MzEyNSA2LjA4OTg0NCAyMS4yOTY4NzUgMTIuMTkxNDA2IDI3LjgwMDc4MSBDIDE0LjQ4NDM3NSAzMC4yNDIxODggMTYuMTYwMTU2IDMxLjk2ODc1IDE2LjE2MDE1NiAzMS45Njg3NSBMIDE2LjgzNTkzOCAzMS40NDE0MDYgQyAxNy40NzY1NjIgMzAuOTQxNDA2IDE4LjI5Njg3NSAyOS45Mzc1IDE4LjcxNDg0NCAyOC41NjY0MDYgQyAxOS41ODU5MzggMjkuMDUwNzgxIDIwLjY4MzU5NCAyOS42NTYyNSAyMC42ODM1OTQgMjkuNjU2MjUgTCAyMS4xNjc5NjkgMjkuMDE5NTMxIEMgMjEuMjMwNDY5IDI4Ljk0NTMxMiAyMi4zMjAzMTIgMjcuNDkyMTg4IDIyLjU5Mzc1IDI1LjY5OTIxOSBDIDIyLjY5OTIxOSAyNS43MzA0NjkgMjUuNjQ0NTMxIDI2LjYyMTA5NCAyNS42NDQ1MzEgMjYuNjIxMDk0IEwgMjYuMDIzNDM4IDI2LjAzOTA2MiBDIDI2LjA3NDIxOSAyNS45NjQ4NDQgMjcuMjM4MjgxIDI0LjE
zNjcxOSAyNi43NjE3MTkgMjIuMDE1NjI1IEMgMjYuNjQ0NTMxIDIxLjQ5NjA5NCAyNi40NDE0MDYgMjEuMDAzOTA2IDI2LjE1NjI1IDIwLjU1MDc4MSBDIDI3LjUxNTYyNSAxOS4wMTU2MjUgMjkuOTAyMzQ0IDE1Ljg4NjcxOSAyOS45MDIzNDQgMTUuODg2NzE5IEMgMzAuNjgzNTk0IDE0Ljc0NjA5NCAzMS4yNjE3MTkgMTMuNzE0ODQ0IDMxLjQ3NjU2MiAxMi45MTAxNTYgQyAzMi4xOTkyMTkgMTAuMjQyMTg4IDMyLjIxNDg0NCA3LjY0NDUzMSAzMS4yODUxNTYgNS40OTIxODggWiBNIDMxLjI4MTI1IDUuNDg4MjgxICIvPgo8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6cmdiKDk4LjQzMTM3MyUsNzQuOTAxOTYxJSwxOS42MDc4NDMlKTtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gMjkuODE2NDA2IDYuODgyODEyIEwgMjkuNzE4NzUgNi44NDM3NSBDIDI5LjI2NTYyNSA2LjY2NDA2MiAyOC44NDc2NTYgNi41NzgxMjUgMjguNDU3MDMxIDYuNTc0MjE5IEMgMjcuMjg5MDYyIDYuNTU0Njg4IDI2LjM2MzI4MSA3LjI1NzgxMiAyNS40MDYyNSA4LjMwMDc4MSBMIDI0Ljc3NzM0NCA4Ljk5MjE4OCBMIDIzLjM4NjcxOSA3LjczMDQ2OSBMIDI0LjAxOTUzMSA3LjAzOTA2MiBDIDI0LjY0ODQzOCA2LjM1MTU2MiAyNi4wNzgxMjUgNC43OTY4NzUgMjguMjQyMTg4IDQuNzEwOTM4IEMgMjguMzgyODEyIDQuNzA3MDMxIDI4LjUzMTI1IDQu
NzA3MDMxIDI4LjY4MzU5NCA0LjcxNDg0NCBDIDI4LjQxNDA2MiA0LjM1NTQ2OSAyOC4xMDU0NjkgNC4wMTk1MzEgMjcuNzY1NjI1IDMuNzAzMTI1IEMgMjcuNzY1NjI1IDMuNzAzMTI1IDI3LjEwMTU2MiAzLjMyMDMxMiAyNi40MjE4NzUgMy4zMTY0MDYgQyAyNS4xOTE0MDYgMy4zMDg1OTQgMjMuODU5Mzc1IDQuMTE3MTg4IDIzLjE2Nzk2OSA0Ljg3MTA5NCBMIDIxLjgxMjUgNi4yMzA0NjkgTCAyMC40ODA0NjkgNC45MTAxNTYgTCAyMS44MDg1OTQgMy41NzgxMjUgQyAyMi4zODY3MTkgMi45NDkyMTkgMjMuMTU2MjUgMi4zODY3MTkgMjQuMDA3ODEyIDIgQyAyMy43NDYwOTQgMS45NzY1NjIgMjMuNDgwNDY5IDEuOTY0ODQ0IDIzLjIxMDkzOCAxLjk2NDg0NCBDIDIyLjkzNzUgMS45Njg3NSAyMi42NjQwNjIgMS45ODQzNzUgMjIuMzc4OTA2IDIuMDE1NjI1IEMgMTkuOTA2MjUgMi4zMDA3ODEgMTguNDE0MDYyIDQuMzE2NDA2IDE4LjE3MTg3NSA0LjcwNzAzMSBDIDE4LjE3MTg3NSA0LjcwNzAzMSAxOC4wNjI1IDQuODk0NTMxIDE3LjkwMjM0NCA1LjE3OTY4OCBDIDE5Ljg3ODkwNiA3LjAyNzM0NCAyMi45MTc5NjkgOS44MTI1IDIyLjk1MzEyNSA5Ljg0Mzc1IEwgMjMuNjEzMjgxIDEwLjQ0OTIxOSBMIDIzLjAzOTA2MiAxMS4xMzI4MTIgQyAyMC45Mzc1IDEzLjYyODkwNiAxOC42MTcxODggMTQuMzA4NTk0IDE1Ljc0MjE4OCAxMy4yODEyNSBDIDE0LjM3MTA5N
CAxMi43ODkwNjIgMTIuNTM1MTU2IDExLjUzMTI1IDExLjI2OTUzMSAxMC41ODk4NDQgQyAxMS4yNjk1MzEgMTAuNTg5ODQ0IDExLjE5NTMxMiAxMC41NDY4NzUgMTEuMTY0MDYyIDEwLjU3MDMxMiBDIDExLjEyODkwNiAxMC41OTM3NSAxMS4xMzI4MTIgMTAuNjg3NSAxMS4xNDA2MjUgMTAuNzE4NzUgQyAxMS41MjM0MzggMTIuODgyODEyIDE0LjQzNzUgMTQuMzcxMDk0IDE4Ljg2MzI4MSAxNi4yMTg3NSBMIDE5LjczODI4MSAxNi41NjI1IEMgMjAuOTEwMTU2IDE3LjAxOTUzMSAyMiAxNy4yMzQzNzUgMjIuOTkyMTg4IDE3LjI0MjE4OCBDIDI1LjE3NTc4MSAxNy4yNTc4MTIgMjYuODc1IDE2LjM1NTQ2OSAyNy44OTQ1MzEgMTUuMjUzOTA2IEwgMjguNDE0MDYyIDE0LjY3OTY4OCBDIDI5LjAyNzM0NCAxMy44OTA2MjUgMjkuNDg0Mzc1IDEyLjk1MzEyNSAyOS42NDg0MzggMTIuMzU5Mzc1IEMgMzAuMTkxNDA2IDEwLjM4NjcxOSAzMC4zMzk4NDQgOC40ODQzNzUgMjkuODE2NDA2IDYuODc4OTA2IFogTSAyOS44MTY0MDYgNi44ODI4MTIgIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoNzguODIzNTI5JSw1Ny4yNTQ5MDIlLDE4LjAzOTIxNiUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAyOS45Njg3NSAxMC45NDkyMTkgQyAyOS4yMzQzNzUgMTEuODA0Njg4IDI4LjE4MzU5NCAxMi43OTY4NzUgMjYuOTE0MDYyID
EzLjU5Mzc1IEMgMjQuOTQxNDA2IDE0LjgzNTkzOCAyMy41NTA3ODEgMTQuMzQzNzUgMjEuOTcyNjU2IDEzLjYyNSBDIDIzLjM0Mzc1IDEyLjM2MzI4MSAyNC41MzUxNTYgMTEuMjQ2MDk0IDI0LjUzNTE1NiAxMS4yNDYwOTQgTCAyMy42MDU0NjkgMTAuNDQ5MjE5IEwgMjMuMDQ2ODc1IDExLjExMzI4MSBDIDIwLjkzNzUgMTMuNjI1IDE4LjYyMTA5NCAxNC4zMjAzMTIgMTUuNzQ2MDk0IDEzLjI3MzQzOCBDIDE0LjM5ODQzOCAxMi43ODUxNTYgMTIuNTc4MTI1IDExLjU2MjUgMTEuMzEyNSAxMC42MTcxODggQyAxMS4yOTI5NjkgMTAuNTk3NjU2IDExLjIxODc1IDEwLjUzNTE1NiAxMS4xNjQwNjIgMTAuNTUwNzgxIEMgMTEuMTA1NDY5IDEwLjU2NjQwNiAxMS4xMTcxODggMTAuNjkxNDA2IDExLjEyMTA5NCAxMC43MTQ4NDQgQyAxMS41MTk1MzEgMTIuOTAyMzQ0IDE0LjQ1MzEyNSAxNC4zOTA2MjUgMTguODY3MTg4IDE2LjI1NzgxMiBMIDE5LjczODI4MSAxNi42MDU0NjkgQyAyMC4wMDc4MTIgMTYuNzEwOTM4IDIwLjI3MzQzOCAxNi44MDA3ODEgMjAuNTM1MTU2IDE2Ljg3ODkwNiBDIDIwLjYxMzI4MSAxNi45MDYyNSAyMS4xMzI4MTIgMTcuMDQyOTY5IDIxLjMwODU5NCAxNy4wODIwMzEgQyAyMS4zOTQ1MzEgMTcuMTAxNTYyIDIxLjkxNDA2MiAxNy4xOTE0MDYgMjIuMDgyMDMxIDE3LjIxMDkzOCBDIDIyLjE1NjI1IDE3LjIyMjY1NiAyMi43NzM0MzggMTcuMjc
3MzQ0IDIzIDE3LjI4MTI1IEMgMjQuMzIwMzEyIDE3LjI0MjE4OCAyNS40NTcwMzEgMTYuOTcyNjU2IDI2LjM3MTA5NCAxNi40NDUzMTIgQyAyNi43ODUxNTYgMTYuMjA3MDMxIDI3LjU2NjQwNiAxNS43Njk1MzEgMjguNDI1NzgxIDE0LjY4NzUgQyAyOS40MDYyNSAxMy40NTcwMzEgMjkuNzY5NTMxIDEyLjI0NjA5NCAyOS45Njg3NSAxMC45NDkyMTkgWiBNIDI5Ljk2ODc1IDEwLjk0OTIxOSAiLz4KPHBhdGggc3R5bGU9IiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOnJnYigzMi45NDExNzYlLDY1LjQ5MDE5NiUsODUuNDkwMTk2JSk7ZmlsbC1vcGFjaXR5OjE7IiBkPSJNIDYuNjk5MjE5IDIuMjQyMTg4IEMgNC43NDYwOTQgMi44OTA2MjUgMy4zNzUgNC4wOTc2NTYgMi42MjEwOTQgNS44MjgxMjUgQyAxLjM1NTQ2OSA4LjczNDM3NSAxLjk2NDg0NCAxMS44ODI4MTIgNC4zNDM3NSAxNC42OTUzMTIgQyA2Ljc2MTcxOSAxNy41NTQ2ODggMTIuMTc1NzgxIDIwLjI3NzM0NCAyMS4zODI4MTIgMjMuMjYxNzE5IEMgMjMuMDMxMjUgMjMuNzk2ODc1IDI0LjA3MDMxMiAyNC4xMjEwOTQgMjQuNjgzNTk0IDI0LjMxMjUgQyAyNC44NjcxODggMjMuODIwMzEyIDI1LjAzOTA2MiAyMy4wOTM3NSAyNC44NjcxODggMjIuMzM1OTM4IEMgMjQuNjcxODc1IDIxLjUgMjQuMDgyMDMxIDIwLjc2OTUzMSAyMy4xMTMyODEgMjAuMTU2MjUgQyAyMS43ODUxNTYgMTku
NTIzNDM4IDIwLjM0NzY1NiAxOC45MzM1OTQgMTguOTU3MDMxIDE4LjM1OTM3NSBDIDEzLjM5ODQzOCAxNi4wNzQyMTkgNy42NDg0MzggMTMuNzA3MDMxIDkuNDQ5MjE5IDguNDgwNDY5IEwgOS44OTA2MjUgNy4yMDMxMjUgTCAxMC45Mzc1IDguMDYyNSBDIDExLjg4MjgxMiA4LjgzOTg0NCAxNC42ODc1IDEwLjk4MDQ2OSAxNi4zMDA3ODEgMTEuNTU4NTk0IEMgMTguMTQ4NDM4IDEyLjIyMjY1NiAxOS41MzUxNTYgMTEuOTU3MDMxIDIwLjkxNDA2MiAxMC42Mjg5MDYgQyAxOS43MTg3NSA5LjUzMTI1IDE3LjI2OTUzMSA3LjI3NzM0NCAxNS44ODI4MTIgNS45NjQ4NDQgQyAxNC43MTg3NSA0Ljg3MTA5NCAxMi44OTQ1MzEgMy4zNzUgMTIuMTI4OTA2IDIuOTg4MjgxIEwgMTIuMDUwNzgxIDIuOTQ5MjE5IEMgMTEuMTY3OTY5IDIuNDk2MDk0IDkuMTAxNTYyIDEuNDQxNDA2IDYuNjk5MjE5IDIuMjQyMTg4IFogTSA2LjY5OTIxOSAyLjI0MjE4OCAiLz4KPHBhdGggc3R5bGU9IiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOnJnYigxMC41ODgyMzUlLDQ1Ljg4MjM1MyUsNzMuNzI1NDklKTtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gNSAxMi4xNDA2MjUgQyAzLjQyOTY4OCAxMC4wNzQyMTkgMy4wODU5MzggNi41ODU5MzggMy4wMTk1MzEgNS4wNTQ2ODggQyAyLjg2NzE4OCA1LjMwNDY4OCAyLjcxMDkzOCA1LjU4MjAzMSAyLjU4OTg0NCA1Ljg1OTM3NSBDI
DEuMzI0MjE5IDguNzY1NjI1IDEuOTYwOTM4IDExLjkyMTg3NSA0LjMzNTkzOCAxNC43MzA0NjkgQyA2Ljc1NzgxMiAxNy41OTM3NSAxMi4xNzE4NzUgMjAuMzE2NDA2IDIxLjM3ODkwNiAyMy4zMDA3ODEgQyAyMy4wMjczNDQgMjMuODM1OTM4IDI0LjA2NjQwNiAyNC4xNjAxNTYgMjQuNjc5Njg4IDI0LjM0NzY1NiBDIDI0LjgyMDMxMiAyMy45NjQ4NDQgMjQuOTUzMTI1IDIzLjQ1NzAzMSAyNC45Mzc1IDIyLjg3ODkwNiBDIDIyLjk2ODc1IDIyLjA4NTkzOCAxNC44NDM3NSAxOC44MDA3ODEgMTIuNzE0ODQ0IDE3Ljc3MzQzOCBDIDEwLjI4OTA2MiAxNi42MDE1NjIgNy4xMjg5MDYgMTUuMzU5Mzc1IDQuOTk2MDk0IDEyLjE0MDYyNSBaIE0gNSAxMi4xNDA2MjUgIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMTAuNTg4MjM1JSw0NS44ODIzNTMlLDczLjcyNTQ5JSk7ZmlsbC1vcGFjaXR5OjE7IiBkPSJNIDEyLjAxNTYyNSA3LjMyMDMxMiBDIDEwLjgyMDMxMiA2LjYzMjgxMiA5Ljg5MDYyNSA3LjIwNzAzMSA5Ljg5MDYyNSA3LjIwNzAzMSBMIDEwLjkzMzU5NCA4LjA3NDIxOSBDIDExLjg3ODkwNiA4Ljg1MTU2MiAxNC42Nzk2ODggMTAuOTkyMTg4IDE2LjI5Njg3NSAxMS41NzAzMTIgQyAxOC4xNDQ1MzEgMTIuMjM0Mzc1IDE5LjUzNTE1NiAxMS45NjA5MzggMjAuOTEwMTU2IDEwLjYyODkwNiBDIDIwLjE5MT
QwNiAxMC44NTkzNzUgMTkuNDk2MDk0IDEwLjkzMzU5NCAxOC44MzIwMzEgMTAuODg2NzE5IEMgMTUuOTQxNDA2IDEwLjY3MTg3NSAxMy42MDkzNzUgOC4yMzQzNzUgMTIuMDE1NjI1IDcuMzIwMzEyIFogTSAxMi4wMTU2MjUgNy4zMjAzMTIgIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMzIuOTQxMTc2JSw2NS40OTAxOTYlLDg1LjQ5MDE5NiUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMC42MDE1NjIgMjMuMTc1NzgxIEMgMTEuNTAzOTA2IDI0LjE4MzU5NCAxMi41MDM5MDYgMjUuMjY5NTMxIDEzLjYyMTA5NCAyNi40NDUzMTIgQyAxNC44NjMyODEgMjcuNzUzOTA2IDE1Ljc0MjE4OCAyOC42Nzk2ODggMTYuMjg5MDYyIDI5LjI1MzkwNiBDIDE2LjU4OTg0NCAyOC44NDc2NTYgMTYuOTIxODc1IDI4LjI1MzkwNiAxNy4wNjY0MDYgMjcuNDg0Mzc1IEMgMTYuNzM0Mzc1IDI3LjI4NTE1NiAxNi4zNzUgMjcuMDYyNSAxNS45ODA0NjkgMjYuODE2NDA2IEMgMTMuOTQ5MjE5IDI1LjU1MDc4MSAxMi4xNzE4NzUgMjQuMzQ3NjU2IDEwLjYwNTQ2OSAyMy4xNzU3ODEgWiBNIDEwLjYwMTU2MiAyMy4xNzU3ODEgIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMzIuOTQxMTc2JSw2NS40OTAxOTYlLDg1LjQ5MDE5NiUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxOS4
2MTMyODEgMjQuNjcxODc1IEMgMTguOTg4MjgxIDI0LjQ2MDkzOCAxOC4zNzUgMjQuMjUzOTA2IDE3Ljc4NTE1NiAyNC4wNDY4NzUgQyAxNi41NjY0MDYgMjMuNjIxMDk0IDE1LjQxNDA2MiAyMy4xOTUzMTIgMTQuMzQ3NjU2IDIyLjc3NzM0NCBDIDEzLjQyNTc4MSAyMi40MTQwNjIgMTIuNTcwMzEyIDIyLjA1NDY4OCAxMS43NTc4MTIgMjEuNjk1MzEyIEMgMTEuNzU3ODEyIDIxLjY5OTIxOSAxMS43NjE3MTkgMjEuNjk5MjE5IDExLjc2MTcxOSAyMS43MDMxMjUgQyAxMS43NjE3MTkgMjEuNzAzMTI1IDExLjc2NTYyNSAyMS43MDMxMjUgMTEuNzY1NjI1IDIxLjcwMzEyNSBDIDEyLjMwMDc4MSAyMi4xMDE1NjIgMTIuODY3MTg4IDIyLjUxMTcxOSAxMy40NzY1NjIgMjIuOTMzNTk0IEMgMTMuNDg0Mzc1IDIyLjkzNzUgMTMuNDk2MDk0IDIyLjk0NTMxMiAxMy41MDM5MDYgMjIuOTUzMTI1IEMgMTMuNjk1MzEyIDIzLjA4NTkzOCAxMy44OTA2MjUgMjMuMjE4NzUgMTQuMDg5ODQ0IDIzLjM1NTQ2OSBDIDE0LjExMzI4MSAyMy4zNzEwOTQgMTQuMTQwNjI1IDIzLjM4NjcxOSAxNC4xNjQwNjIgMjMuNDA2MjUgQyAxNC4zNTU0NjkgMjMuNTM1MTU2IDE0LjU1NDY4OCAyMy42NjQwNjIgMTQuNzUgMjMuODAwNzgxIEMgMTQuNzc3MzQ0IDIzLjgxNjQwNiAxNC44MDQ2ODggMjMuODMyMDMxIDE0LjgyODEyNSAyMy44NTE1NjIgQyAxNS40NzI2NTYgMjQuMjc3MzQ0IDE2LjE0
ODQzOCAyNC43MTA5MzggMTYuODY3MTg4IDI1LjE2NDA2MiBDIDE2Ljg3NSAyNS4xNjc5NjkgMTYuODgyODEyIDI1LjE3MTg3NSAxNi44ODY3MTkgMjUuMTc1NzgxIEMgMTcuMzk0NTMxIDI1LjQ3MjY1NiAxOC45OTIxODggMjYuNDY0ODQ0IDE5LjAwMzkwNiAyNi40NzI2NTYgQyAxOS4wMDc4MTIgMjYuNDc2NTYyIDE5LjAxMTcxOSAyNi40ODA0NjkgMTkuMDE5NTMxIDI2LjQ4MDQ2OSBDIDE5LjM1MTU2MiAyNi42Nzk2ODggMTkuNjM2NzE5IDI2Ljg0NzY1NiAxOS44Nzg5MDYgMjYuOTg4MjgxIEMgMTkuOTYwOTM4IDI3LjAzOTA2MiAyMC4wMzkwNjIgMjcuMDg1OTM4IDIwLjExMzI4MSAyNy4xMjUgQyAyMC4xMTMyODEgMjcuMTI1IDIwLjExMzI4MSAyNy4xMjEwOTQgMjAuMTEzMjgxIDI3LjEyMTA5NCBDIDIwLjE1MjM0NCAyNy4wNDY4NzUgMjAuMTk1MzEyIDI2Ljk3MjY1NiAyMC4yMzQzNzUgMjYuODkwNjI1IEMgMjAuMjUgMjYuODU1NDY5IDIwLjI2OTUzMSAyNi44MTY0MDYgMjAuMjg5MDYyIDI2Ljc3NzM0NCBDIDIwLjMwODU5NCAyNi43MzQzNzUgMjAuMzI4MTI1IDI2LjY5MTQwNiAyMC4zNTE1NjIgMjYuNjQ0NTMxIEMgMjAuMzc1IDI2LjU4OTg0NCAyMC4zOTg0MzggMjYuNTM1MTU2IDIwLjQyMTg3NSAyNi40ODA0NjkgQyAyMC40MzM1OTQgMjYuNDUzMTI1IDIwLjQ0MTQwNiAyNi40MjU3ODEgMjAuNDUzMTI1IDI2LjM5ODQzOCBDIDIwLjU3ODEyNSAyN
i4wNzgxMjUgMjAuNjg3NSAyNS43MjI2NTYgMjAuNzM4MjgxIDI1LjM1OTM3NSBDIDIwLjczODI4MSAyNS4zNTE1NjIgMjAuNzM4MjgxIDI1LjM0NzY1NiAyMC43NDIxODggMjUuMzM5ODQ0IEMgMjAuNzUzOTA2IDI1LjI0NjA5NCAyMC43NjU2MjUgMjUuMTUyMzQ0IDIwLjc2OTUzMSAyNS4wNTQ2ODggQyAyMC4zNzUgMjQuOTI5Njg4IDE5Ljk5MjE4OCAyNC44MDA3ODEgMTkuNjEzMjgxIDI0LjY3MTg3NSBaIE0gMTkuNjEzMjgxIDI0LjY3MTg3NSAiLz4KPC9nPgo8L3N2Zz4K`;

const certProMapMrkerSvg = `data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgdmlld0JveD0iNiAzIDI0IDMwIiBoZWlnaHQ9IjM2IiB3aWR0aD0iMjgiPgogIDxnIGlkPSJzdXJmYWNlMSIgdHJhbnNmb3JtPSJtYXRyaXgoMC44MzMzMzMsIDAsIDAsIDAuODY2NjY3LCAxLCAwLjQpIj4KICAgIDxwYXRoIHN0eWxlPSJzdHJva2U6IG5vbmU7IGZpbGwtcnVsZTogZXZlbm9kZDsgZmlsbC1vcGFjaXR5OiAxOyBmaWxsOiByZ2IoNjcsIDEwMCwgMTMwKTsiIGQ9Ik0gMTYuOTM3NSAzMi41NTg1OTQgTCAxOCAzMS41IFogTSAxOCAzMS41IEwgMTkuMDYyNSAzMi41NTg1OTQgQyAxOC43ODEyNSAzMi44Mzk4NDQgMTguMzk4NDM4IDMzIDE4IDMzIEMgMTcuNjAxNTYyIDMzIDE3LjIxODc1IDMyLjgzOTg0NCAxNi45Mzc1IDMyLjU1ODU5NCBMIDE2LjgwODU5NCAzMi40Mjk2ODggQyAxNi4yODEyNSAzMS44ODI4MTIgMTUuNzYxNzE5IDMxLjMzMjAzMSAxNS4yNSAzMC43Njk1MzEgQyAxMy45NjQ4NDQgMjkuMzYzMjgxIDEyLjczODI4MSAyNy45MDYyNSAxMS41NjY0MDYgMjYuNDA2MjUgQyAxMC4yMjY1NjIgMjQuNjgzNTk0IDguODU5Mzc1IDIyLjczNDM3NSA3LjgyMDMxMiAyMC44MDQ2ODggQyA2LjgwMDc4MSAxOC
45MTc5NjkgNiAxNi44NzEwOTQgNiAxNSBDIDYgOC4xOTE0MDYgMTEuMzg2NzE5IDMgMTggMyBDIDI0LjYxMzI4MSAzIDMwIDguMTkxNDA2IDMwIDE1IEMgMzAgMTYuODcxMDk0IDI5LjE5OTIxOSAxOC45MTc5NjkgMjguMTc5Njg4IDIwLjgwNDY4OCBDIDI3LjE0MDYyNSAyMi43MzQzNzUgMjUuNzczNDM4IDI0LjY4MzU5NCAyNC40MzM1OTQgMjYuNDA2MjUgQyAyMi43OTY4NzUgMjguNTA3ODEyIDIxLjA0Njg3NSAzMC41MTU2MjUgMTkuMTkxNDA2IDMyLjQyOTY4OCBMIDE5LjA2MjUgMzIuNTU4NTk0IFogTSAxOCAxOS41IEMgMjAuNDg0Mzc1IDE5LjUgMjIuNSAxNy40ODQzNzUgMjIuNSAxNSBDIDIyLjUgMTIuNTE1NjI1IDIwLjQ4NDM3NSAxMC41IDE4IDEwLjUgQyAxNS41MTU2MjUgMTAuNSAxMy41IDEyLjUxNTYyNSAxMy41IDE1IEMgMTMuNSAxNy40ODQzNzUgMTUuNTE1NjI1IDE5LjUgMTggMTkuNSBaIE0gMTggMTkuNSAiLz4KICA8L2c+Cjwvc3ZnPg==`;

const indvMapMarkerSvg = `data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjAgMjUiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbDpyZ2IoNzguODIzNTMxJSw1Ny4yNTQ5MDUlLDE4LjAzOTIxNiUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA5LjExMzI4MSAyNC42MzI4MTIgTCAxMCAyMy43NSBaIE0gMTAgMjMuNzUgTCAxMC44ODY3MTkgMjQuNjMyODEyIEMgMTAuNjUyMzQ0IDI0Ljg2NzE4OCAxMC4zMzIwMzEgMjUgMTAgMjUgQyA5LjY2Nzk2OSAyNSA5LjM0NzY1NiAyNC44NjcxODggOS4xMTMyODEgMjQuNjMyODEyIEwgOS4wMDc4MTIgMjQuNTIzNDM4IEMgOC41NjY0MDYgMjQuMDcwMzEyIDguMTM2NzE5IDIzLjYwOTM3NSA3LjcwNzAzMSAyMy4xNDA2MjUgQyA2LjYzNjcxOSAyMS45Njg3NSA1LjYxMzI4MSAyMC43NTM5MDYgNC42MzY3MTkgMTkuNTAzOTA2IEMgMy41MjM0MzggMTguMDcwMzEyIDIuMzgyODEyIDE2LjQ0NTMxMiAxLjUxNTYyNSAxNC44MzU5MzggQyAwLjY2Nzk2
OSAxMy4yNjU2MjUgMCAxMS41NTg1OTQgMCAxMCBDIDAgNC4zMjQyMTkgNC40ODgyODEgMCAxMCAwIEMgMTUuNTExNzE5IDAgMjAgNC4zMjQyMTkgMjAgMTAgQyAyMCAxMS41NTg1OTQgMTkuMzMyMDMxIDEzLjI2NTYyNSAxOC40ODQzNzUgMTQuODM1OTM4IEMgMTcuNjE3MTg4IDE2LjQ0NTMxMiAxNi40NzY1NjIgMTguMDcwMzEyIDE1LjM2MzI4MSAxOS41MDM5MDYgQyAxMy45OTYwOTQgMjEuMjU3ODEyIDEyLjUzOTA2MiAyMi45Mjk2ODggMTAuOTkyMTg4IDI0LjUyMzQzOCBMIDEwLjg4NjcxOSAyNC42MzI4MTIgWiBNIDEwIDEzLjc1IEMgMTIuMDcwMzEyIDEzLjc1IDEzLjc1IDEyLjA3MDMxMiAxMy43NSAxMCBDIDEzLjc1IDcuOTI5Njg4IDEyLjA3MDMxMiA2LjI1IDEwIDYuMjUgQyA3LjkyOTY4OCA2LjI1IDYuMjUgNy45Mjk2ODggNi4yNSAxMCBDIDYuMjUgMTIuMDcwMzEyIDcuOTI5Njg4IDEzLjc1IDEwIDEzLjc1IFogTSAxMCAxMy43NSAiLz4KPC9nPgo8L3N2Zz4K`;


export default class DirectoryMap extends LightningElement {

    _listings;
    _zoomLevel = null; // default zoom level

    selectedMarkerValue;
    heartLogo = heartLogoSvg;
    certProMapMrker = certProMapMrkerSvg;
    indvMapMarker = indvMapMarkerSvg;

    // Getter and Setter for listings to monitor changes
    @api 
    get listings() {
        return this._listings;
    }

    set listings(value) {
        this._listings = value;
        // Check if there is exactly 1 listing and set zoom level accordingly
        if (this._listings && this._listings.length === 1) {
            this._zoomLevel = 16;
        } else {
            this._zoomLevel = null; // default zoom level for multiple listings
        }
    }

    // Getter and Setter for zoomLevel
    get zoomLevel() {
        return this._zoomLevel;
    }

    set zoomLevel(value) {
        this._zoomLevel = value; // Allow external updates if needed
    }

    cleanName(name) {
        return name
            .replace(/\(Team\)/gi, '')
            .replace(/\(New\)/gi, '')
            .replace(/FTE/gi, '')
            .trim();
    }

    get markers() {
        // Check if listings is undefined before mapping
        if (!this.listings) {
            return [];
        }

        // Convert listings to map markers
        let mapMarkers = [];
        for (let i = 0; i < this.listings.length; i++) {
            if (this.listings[i].acc.Directory_Address__c && this.listings[i].acc.Name && this.listings[i].acc.Coordinates__c) {
                mapMarkers.push({
                    location: {
                        Latitude: `${this.listings[i].acc.Coordinates__c.latitude}`,
                        Longitude: `${this.listings[i].acc.Coordinates__c.longitude}`,
                    },
                    title: this.listings[i].acc.Name ? this.cleanName(this.listings[i].acc.Name) : '',
                    description: ''.concat(
                    this.listings[i].acc.Directory_Address__c.street ? this.listings[i].acc.Directory_Address__c.street + '<br>' : '',
                    this.listings[i].acc.Directory_Address__c.city ? this.listings[i].acc.Directory_Address__c.city + ', ' : '',
                    this.listings[i].acc.Directory_Address__c.stateCode ? this.listings[i].acc.Directory_Address__c.stateCode + ', ' : '',
                    this.listings[i].acc.Directory_Address__c.postalCode ? this.listings[i].acc.Directory_Address__c.postalCode + ', ' : '',
                    this.listings[i].acc.Directory_Address__c.countryCode ? this.listings[i].acc.Directory_Address__c.countryCode : '',
                    ),
                    value: this.listings[i].acc.Name ? this.listings[i].acc.Name : '',
                    mapIcon: this.listings[i].cp ? this.heartLogo :
                        this.listings[i].acc.IsPersonAccount ? this.indvMapMarker :
                            this.certProMapMrker,
                });
            }
        }

        return mapMarkers;
    }

    handleMarkerSelect(event) {
        // Get the selected marker's value (listing Id)
        const selectedMarkerValue = event.detail.selectedMarkerValue;
        this.selectedMarkerValue = selectedMarkerValue;

        // Dispatch custom event to notify parent component
        this.dispatchEvent(new CustomEvent('mapmarkerselected', {
            detail: {
                markerValue: selectedMarkerValue
            }
        }));
    }

    // Simulate setting zoomLevel after getting the listings data
    connectedCallback() {
        this.zoomLevel = this._zoomLevel;  // This will trigger the setter and apply the logic
    }
}